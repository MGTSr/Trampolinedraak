!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.serverInfo={SERVER_IP:"https://trampolinedraak.herokuapp.com",socket:null,server:null,roomCode:"",vip:!1}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(2),n(3)),u=o(c),s=n(4),l=o(s),f=n(5),d=o(f),p=n(6),m=o(p),h=n(7),y=o(h),b=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"100%","100%",Phaser.AUTO,"canvas-container"));return e.state.add("Menu",u.default),e.state.add("GameWaiting",m.default),e.state.add("ControllerWaiting",y.default),e.state.add("Game",l.default),e.state.add("Controller",d.default),e.state.start("Menu"),e}return a(t,e),t}(Phaser.Game),v=new b;Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=this.length-1;e>=0;e--)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WINDOW_WIDTH=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t.WINDOW_HEIGHT=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t.WORLD_SIZE={width:1600,height:1200},t.ASSETS_URL="../assets"},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),a(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#EEEEEE"}},{key:"create",value:function(){console.log("Menu state");var e=this.game;document.getElementById("createRoomBtn").onclick=function(){this.disabled=!0,c.serverInfo.socket=io(c.serverInfo.SERVER_IP);var t=c.serverInfo.socket;t.on("connect",function(){t.emit("new-room",{})}),t.on("room-created",function(t){c.serverInfo.roomCode=t.roomCode,document.getElementById("main").style.display="none",e.state.start("GameWaiting")})},document.getElementById("joinRoomBtn").onclick=function(){var t=this;t.disabled=!0;var n=document.getElementsByClassName("joinInput"),o=n[0].value,r=n[1].value;console.log(o+" || "+r),c.serverInfo.socket=io(c.serverInfo.SERVER_IP);var i=c.serverInfo.socket;i.on("connect",function(){i.emit("join-room",{roomCode:o,userName:r})}),i.on("join-response",function(n){n.success?(document.getElementById("main").style.display="none",c.serverInfo.vip=!0,c.serverInfo.roomCode=o,e.state.start("ControllerWaiting")):(document.getElementById("err-message").innerHTML=n.err,t.disabled=!1,i.disconnect(!0))})},document.getElementById("watchRoomBtn").onclick=function(){var t=this;t.disabled=!0;var n=document.getElementsByClassName("joinInput")[2].value;c.serverInfo.socket=io(c.serverInfo.SERVER_IP);var o=c.serverInfo.socket;o.on("connect",function(){o.emit("watch-room",{roomCode:n})}),o.on("watch-response",function(n){n.success?(document.getElementById("overlay").remove(),e.state.start("Game")):(document.getElementById("err-message").innerHTML=n.err,t.disabled=!1,o.disconnect(!0))})}}},{key:"update",value:function(){}}]),t}(Phaser.State);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=(n(0),function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){console.log("Game state")}},{key:"update",value:function(){}}]),t}(Phaser.State));t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=(n(0),function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){console.log("Controller state")}},{key:"update",value:function(){}}]),t}(Phaser.State));t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),u=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.playerlist=null,e.listSprites=[],e}return i(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this,t=["#c8ad55","#d0fcb3","#9bc59d","#6c5a49","#271f30","#392f5a","#f092dd","#eb9486","#7e7f9a","#97a7b3","#f3de8a"],n=this.game,o={font:"bold 32px Arial",fill:"#333"},r=(n.add.text(.5*n.width,20,c.serverInfo.roomCode,o),c.serverInfo.socket),i=this;r.on("update-playerlist",function(r){i.playerlist=r;for(var a=0;a<i.listSprites;a++)i.listSprites[a].destroy();i.listSprites=[];var c=0;for(var u in i.playerlist){o={font:"bold 24px Arial",fill:t[c]};var s=n.add.text(.5*n.width,80+30*c,r[u].name,o);if(i.listSprites.push(s),null!=r[u].profile){var l=r[u].profile,f="profileImage"+r[u].name,d=new Phaser.Loader(n);d.image(f,l+""),d.onLoadComplete.addOnce(e.loadImageComplete,e,0,n,i.listSprites,.5*n.width-100,80+30*c,f),d.start()}c++}}),r.on("game-started",function(e){n.state.start("Game")}),console.log("Game waiting state")}},{key:"loadImageComplete",value:function(e,t,n,o,r){var i=e.add.sprite(n,o,r);i.width=60,i.height=78,t.push(i)}},{key:"update",value:function(){}}]),t}(Phaser.State);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this.game,t=c.serverInfo.socket,n=document.getElementById("main-controller"),o=document.createElement("p");o.innerHTML="Draw yourself a profile pic!",n.appendChild(o);var r=document.getElementById("canvas-container");n.appendChild(r);var i=document.getElementById("main-controller").clientWidth;console.log(i);var a=1.3*i;e.scale.setGameSize(i,a),this.bmd=e.add.bitmapData(e.width,e.height),this.bmd.ctx.strokeStyle="rgb( 77, 77, 77)",this.bmd.ctx.lineWidth=10,this.bmd.ctx.lineCap="round",this.bmd.ctx.fillStyle="#ff0000",this.sprite=e.add.sprite(0,0,this.bmd),this.bmd.isDragging=!1,this.bmd.lastPoint=null;var u=this.bmd,s=document.createElement("button");if(s.innerHTML="Submit drawing",s.addEventListener("click",function(e){var n=u.canvas.toDataURL();t.emit("submit-drawing",{dataURI:n,type:"profile"}),s.remove(),document.getElementById("canvas-container").style.display="none",c.serverInfo.vip||(o.innerHTML="Waiting for game to start ...")}),n.appendChild(s),c.serverInfo.vip){var l=document.createElement("p");l.innerHTML="You are VIP. Start the game when you're ready.",n.appendChild(l);var f=document.createElement("button");f.innerHTML="START GAME",f.addEventListener("click",function(e){t.emit("start-game",{roomCode:c.serverInfo.roomCode})}),n.appendChild(f)}t.on("game-started",function(t){e.state.start("Controller")}),console.log("Controller Waiting state")}},{key:"update",value:function(){if(this.game.input.activePointer.isUp&&(this.bmd.isDragging=!1,this.bmd.lastPoint=null),this.game.input.activePointer.isDown){console.log("down"),this.bmd.isDragging=!0,this.bmd.ctx.beginPath();var e=new Phaser.Point(this.game.input.x,this.game.input.y);this.bmd.lastPoint&&(this.bmd.ctx.moveTo(this.bmd.lastPoint.x,this.bmd.lastPoint.y),this.bmd.ctx.lineTo(e.x,e.y)),this.bmd.lastPoint=e,this.bmd.ctx.stroke(),this.bmd.dirty=!0}}}]),t}(Phaser.State);t.default=u}]);